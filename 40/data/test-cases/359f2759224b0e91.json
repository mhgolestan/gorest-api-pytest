{"uid":"359f2759224b0e91","name":"Invalid query param token should return 401","fullName":"tests.test_authentication.TestQueryParameterAuth#test_invalid_query_param_token_returns_401","historyId":"5ddd80fd7c27ac6596fbf91d497f4b44","time":{"start":1764341024239,"stop":1764341024241,"duration":2},"description":"Test that invalid access_token in query params returns 401 on write operations.","descriptionHtml":"<p>Test that invalid access_token in query params returns 401 on write operations.</p>\n","status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201","statusTrace":"self = <test_authentication.TestQueryParameterAuth object at 0x7fa29db90550>\ninvalid_query_param_client = <base.api.users_api.UsersClient object at 0x7fa29ddf5350>\n\n    @allure.story('Query Parameter Auth')\n    @allure.title('Invalid query param token should return 401')\n    def test_invalid_query_param_token_returns_401(self, invalid_query_param_client: UsersClient):\n        \"\"\"Test that invalid access_token in query params returns 401 on write operations.\"\"\"\n        # Note: GET requests may return public data even without valid auth\n        # POST/PUT/DELETE require valid authentication\n        payload = UpdateUser()\n        response = invalid_query_param_client.create_user_api(payload)\n    \n>       assert_status_code(response.status_code, HTTPStatus.UNAUTHORIZED)\n\ntests/test_authentication.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nutils/assertions/base/solutions.py:9: in assert_status_code\n    .to_be_equal(actual)\n     ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utils.assertions.base.assertion_mixin.AssertionMixin object at 0x7fa29ddf4c30>\nactual = 201\n\n    def to_be_equal(self, actual: T):\n        step_name = f'Checking that \"{self._description}\" equals to \"{self.expected}\"'\n        with self.step_provider(step_name):\n            template = self._error_template(actual, AssertionTypes.EQUAL)\n>           assert self.expected == actual, template\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nE           AssertionError: \nE                   Checking: Response status code\nE                   Expected: 401 <enum 'HTTPStatus'>\nE                   Actual: 201 <class 'int'>\nE                   \nE                   Expression: assert 401 AssertionTypes.EQUAL 201\n\nutils/assertions/base/assertion_mixin.py:29: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1764341022585,"stop":1764341022586,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_api_if_needed","time":{"start":1764341024216,"stop":1764341024218,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"rate_limit_delay","time":{"start":1764341024218,"stop":1764341024218,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"invalid_query_param_client","time":{"start":1764341024218,"stop":1764341024239,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_mock_state","time":{"start":1764341024218,"stop":1764341024218,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test that invalid access_token in query params returns 401 on write operations.","status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201","statusTrace":"self = <test_authentication.TestQueryParameterAuth object at 0x7fa29db90550>\ninvalid_query_param_client = <base.api.users_api.UsersClient object at 0x7fa29ddf5350>\n\n    @allure.story('Query Parameter Auth')\n    @allure.title('Invalid query param token should return 401')\n    def test_invalid_query_param_token_returns_401(self, invalid_query_param_client: UsersClient):\n        \"\"\"Test that invalid access_token in query params returns 401 on write operations.\"\"\"\n        # Note: GET requests may return public data even without valid auth\n        # POST/PUT/DELETE require valid authentication\n        payload = UpdateUser()\n        response = invalid_query_param_client.create_user_api(payload)\n    \n>       assert_status_code(response.status_code, HTTPStatus.UNAUTHORIZED)\n\ntests/test_authentication.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nutils/assertions/base/solutions.py:9: in assert_status_code\n    .to_be_equal(actual)\n     ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utils.assertions.base.assertion_mixin.AssertionMixin object at 0x7fa29ddf4c30>\nactual = 201\n\n    def to_be_equal(self, actual: T):\n        step_name = f'Checking that \"{self._description}\" equals to \"{self.expected}\"'\n        with self.step_provider(step_name):\n            template = self._error_template(actual, AssertionTypes.EQUAL)\n>           assert self.expected == actual, template\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nE           AssertionError: \nE                   Checking: Response status code\nE                   Expected: 401 <enum 'HTTPStatus'>\nE                   Actual: 201 <class 'int'>\nE                   \nE                   Expression: assert 401 AssertionTypes.EQUAL 201\n\nutils/assertions/base/assertion_mixin.py:29: AssertionError","steps":[{"name":"Creating user","time":{"start":1764341024240,"stop":1764341024241,"duration":1},"status":"passed","steps":[{"name":"Making POST request to \"'/users'\"","time":{"start":1764341024240,"stop":1764341024241,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'/users'"},{"name":"json","value":"{'name': '75y8Colfw6', 'email': 'laurahampton@example.org', 'gender': 'female', 'status': 'inactive'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"payload","value":"UpdateUser(name='75y8Colfw6', email='laurahampton@example.org', gender='female', status='inactive')"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Checking that \"Response status code\" equals to \"401\"","time":{"start":1764341024241,"stop":1764341024241,"duration":0},"status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201\n        \n","statusTrace":"  File \"/home/runner/work/gorest-api-pytest/gorest-api-pytest/utils/assertions/base/assertion_mixin.py\", line 29, in to_be_equal\n    assert self.expected == actual, template\n           ^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"68418b3c4183374a","name":"stdout","source":"68418b3c4183374a.txt","type":"text/plain","size":23}],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"rate_limit_delay::0","time":{"start":1764341024246,"stop":1764341024746,"duration":500},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_mock_state::0","time":{"start":1764341024746,"stop":1764341024746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_api_if_needed::0","time":{"start":1764341024747,"stop":1764341024747,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"Query Parameter Auth"},{"name":"feature","value":"Authentication"},{"name":"tag","value":"authentication"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_authentication"},{"name":"subSuite","value":"TestQueryParameterAuth"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2148-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_authentication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["authentication"]},"source":"359f2759224b0e91.json","parameterValues":[]}