{"uid":"d4d55c9e2edadd9","name":"Invalid bearer token should return 401","fullName":"tests.test_authentication.TestBearerTokenAuth#test_invalid_bearer_token_returns_401","historyId":"6cdaf3ad33313b8297d4b22ef38680a3","time":{"start":1764341023146,"stop":1764341023148,"duration":2},"description":"Test that invalid Bearer token returns 401 Unauthorized on write operations.","descriptionHtml":"<p>Test that invalid Bearer token returns 401 Unauthorized on write operations.</p>\n","status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201","statusTrace":"self = <test_authentication.TestBearerTokenAuth object at 0x7fa29db90410>\ninvalid_bearer_client = <base.api.users_api.UsersClient object at 0x7fa29dddb4d0>\n\n    @allure.story('Bearer Token Auth')\n    @allure.title('Invalid bearer token should return 401')\n    def test_invalid_bearer_token_returns_401(self, invalid_bearer_client: UsersClient):\n        \"\"\"Test that invalid Bearer token returns 401 Unauthorized on write operations.\"\"\"\n        # Note: GET requests may return public data even without valid auth\n        # POST/PUT/DELETE require valid authentication\n        payload = UpdateUser()\n        response = invalid_bearer_client.create_user_api(payload)\n    \n>       assert_status_code(response.status_code, HTTPStatus.UNAUTHORIZED)\n\ntests/test_authentication.py:37: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nutils/assertions/base/solutions.py:9: in assert_status_code\n    .to_be_equal(actual)\n     ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utils.assertions.base.assertion_mixin.AssertionMixin object at 0x7fa29dddb610>\nactual = 201\n\n    def to_be_equal(self, actual: T):\n        step_name = f'Checking that \"{self._description}\" equals to \"{self.expected}\"'\n        with self.step_provider(step_name):\n            template = self._error_template(actual, AssertionTypes.EQUAL)\n>           assert self.expected == actual, template\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nE           AssertionError: \nE                   Checking: Response status code\nE                   Expected: 401 <enum 'HTTPStatus'>\nE                   Actual: 201 <class 'int'>\nE                   \nE                   Expression: assert 401 AssertionTypes.EQUAL 201\n\nutils/assertions/base/assertion_mixin.py:29: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1764341022585,"stop":1764341022586,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_api_if_needed","time":{"start":1764341023123,"stop":1764341023125,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_mock_state","time":{"start":1764341023125,"stop":1764341023125,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"invalid_bearer_client","time":{"start":1764341023125,"stop":1764341023146,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"rate_limit_delay","time":{"start":1764341023125,"stop":1764341023125,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test that invalid Bearer token returns 401 Unauthorized on write operations.","status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201","statusTrace":"self = <test_authentication.TestBearerTokenAuth object at 0x7fa29db90410>\ninvalid_bearer_client = <base.api.users_api.UsersClient object at 0x7fa29dddb4d0>\n\n    @allure.story('Bearer Token Auth')\n    @allure.title('Invalid bearer token should return 401')\n    def test_invalid_bearer_token_returns_401(self, invalid_bearer_client: UsersClient):\n        \"\"\"Test that invalid Bearer token returns 401 Unauthorized on write operations.\"\"\"\n        # Note: GET requests may return public data even without valid auth\n        # POST/PUT/DELETE require valid authentication\n        payload = UpdateUser()\n        response = invalid_bearer_client.create_user_api(payload)\n    \n>       assert_status_code(response.status_code, HTTPStatus.UNAUTHORIZED)\n\ntests/test_authentication.py:37: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nutils/assertions/base/solutions.py:9: in assert_status_code\n    .to_be_equal(actual)\n     ^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <utils.assertions.base.assertion_mixin.AssertionMixin object at 0x7fa29dddb610>\nactual = 201\n\n    def to_be_equal(self, actual: T):\n        step_name = f'Checking that \"{self._description}\" equals to \"{self.expected}\"'\n        with self.step_provider(step_name):\n            template = self._error_template(actual, AssertionTypes.EQUAL)\n>           assert self.expected == actual, template\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nE           AssertionError: \nE                   Checking: Response status code\nE                   Expected: 401 <enum 'HTTPStatus'>\nE                   Actual: 201 <class 'int'>\nE                   \nE                   Expression: assert 401 AssertionTypes.EQUAL 201\n\nutils/assertions/base/assertion_mixin.py:29: AssertionError","steps":[{"name":"Creating user","time":{"start":1764341023147,"stop":1764341023148,"duration":1},"status":"passed","steps":[{"name":"Making POST request to \"'/users'\"","time":{"start":1764341023147,"stop":1764341023148,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'/users'"},{"name":"json","value":"{'name': 'Miq5fqSmQ5HS', 'email': 'robertacosta@example.com', 'gender': 'male', 'status': 'active'}"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"payload","value":"UpdateUser(name='Miq5fqSmQ5HS', email='robertacosta@example.com', gender='male', status='active')"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Checking that \"Response status code\" equals to \"401\"","time":{"start":1764341023148,"stop":1764341023148,"duration":0},"status":"failed","statusMessage":"AssertionError: \n        Checking: Response status code\n        Expected: 401 <enum 'HTTPStatus'>\n        Actual: 201 <class 'int'>\n        \n        Expression: assert 401 AssertionTypes.EQUAL 201\n        \n","statusTrace":"  File \"/home/runner/work/gorest-api-pytest/gorest-api-pytest/utils/assertions/base/assertion_mixin.py\", line 29, in to_be_equal\n    assert self.expected == actual, template\n           ^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5b2c94ac5e835156","name":"stdout","source":"5b2c94ac5e835156.txt","type":"text/plain","size":23}],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"rate_limit_delay::0","time":{"start":1764341023181,"stop":1764341023681,"duration":500},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_api_if_needed::0","time":{"start":1764341023682,"stop":1764341023682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_mock_state::0","time":{"start":1764341023682,"stop":1764341023682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Authentication"},{"name":"story","value":"Bearer Token Auth"},{"name":"tag","value":"authentication"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_authentication"},{"name":"subSuite","value":"TestBearerTokenAuth"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2148-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_authentication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["authentication"]},"source":"d4d55c9e2edadd9.json","parameterValues":[]}